# RAG é—®ç­”ç³»ç»Ÿï¼ˆåŸºäº Qwen + Qdrantï¼‰

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generation, RAGï¼‰** æ¶æ„çš„é—®ç­”ç³»ç»Ÿï¼Œä½¿ç”¨æœ¬åœ°å‘é‡æ•°æ®åº“ **Qdrant** å­˜å‚¨çŸ¥è¯†ç‰‡æ®µï¼Œå¹¶é€šè¿‡å¤§è¯­è¨€æ¨¡å‹ï¼ˆQwen-Maxï¼‰ç”Ÿæˆç­”æ¡ˆã€‚é€‚ç”¨äºå¯¹ç‰¹å®šæ–‡æ¡£é›†ï¼ˆå¦‚ OCR æå–çš„æ–‡æœ¬ï¼‰è¿›è¡Œè¯­ä¹‰é—®ç­”ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- æ”¯æŒä» JSON æ ¼å¼çš„ OCR æ–‡æœ¬ä¸­æ„å»ºçŸ¥è¯†åº“ã€‚
- ä½¿ç”¨ `Conan-embedding-v1` åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬å‘é‡åŒ–å¹¶å­˜å…¥ Qdrantã€‚
- ç”¨æˆ·æé—®æ—¶è‡ªåŠ¨æ£€ç´¢æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡ç‰‡æ®µã€‚
- åŸºäºæ£€ç´¢ç»“æœï¼Œç”± Qwen-Max æ¨¡å‹ç”Ÿæˆå‡†ç¡®ã€ç®€æ´ã€æœ‰æ¥æºä¾æ®çš„å›ç­”ã€‚
- æä¾› Gradio Web ç•Œé¢ï¼Œæ”¯æŒäº¤äº’å¼é—®ç­”ä¸æ£€ç´¢å†…å®¹æŸ¥çœ‹ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„
â”œâ”€â”€ small_ocr_content_list.json     # ç¤ºä¾‹çŸ¥è¯†åº“ï¼ˆOCR æå–çš„é©¬å…‹æ€ã€Šèµ„æœ¬è®ºã€‹èŠ‚é€‰ï¼‰
â”œâ”€â”€ qdrant.py                       # Qdrant å‘é‡æ•°æ®åº“å°è£…
â”œâ”€â”€ vector_retriever.py             # å‘é‡æ£€ç´¢å™¨
â”œâ”€â”€ rag_agent.py                    # RAG é—®ç­”æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ gradio_show.py                  # Gradio Web ç•Œé¢
â”œâ”€â”€ .env                            # å­˜æ”¾ API å¯†é’¥ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â””â”€â”€ qdrant_data/                    # æœ¬åœ° Qdrant æ•°æ®åº“å­˜å‚¨ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

## ğŸ”‘ é…ç½® API å¯†é’¥
åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°è·å– Qwen API Keyã€‚
åˆ›å»º .env æ–‡ä»¶ï¼š
QWEN_API_KEY=your_qwen_api_key_here

## â–¶ï¸ å¿«é€Ÿå¯åŠ¨
1. åˆå§‹åŒ–çŸ¥è¯†åº“ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
è¿è¡Œä»¥ä¸‹è„šæœ¬å°† small_ocr_content_list.json ä¸­çš„å†…å®¹å¯¼å…¥å‘é‡æ•°æ®åº“ï¼š
from qdrant import QdrantDB
db = QdrantDB()
db.save_from_json_file("small_ocr_content_list.json")
print("âœ… çŸ¥è¯†åº“åˆå§‹åŒ–å®Œæˆï¼")

2. å¯åŠ¨ Web ç•Œé¢
python main.py
è®¿é—® http://localhost:7860 å³å¯ä½¿ç”¨é—®ç­”ç³»ç»Ÿã€‚

3. å‘½ä»¤è¡Œæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
from rag_agent import single_agent
print(single_agent("åŠ³åŠ¨çš„äºŒé‡æ€§æŒ‡ä»€ä¹ˆ?"))

## ğŸ“¦ æŠ€æœ¯æ ˆ
LLM: Qwen-Maxï¼ˆé€šä¹‰åƒé—®ï¼‰
Embedding: TencentBAC/Conan-embedding-v1
å‘é‡æ•°æ®åº“: Qdrantï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰
æ¡†æ¶: CAMELï¼ˆç”¨äº Agent å’Œå­˜å‚¨æŠ½è±¡ï¼‰
å‰ç«¯: Gradio

## ğŸ“ æ³¨æ„äº‹é¡¹
é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½åµŒå…¥æ¨¡å‹ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
æ‰€æœ‰å›ç­”ä¸¥æ ¼åŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œä¸ä¼šç¼–é€ ä¿¡æ¯ã€‚
æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒéœ€è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨æªæ–½ã€‚

## æ•ˆæœæ¼”ç¤º
1. åˆå§‹çŠ¶æ€
![init](./assets/init.png)

2. æ£€ç´¢æˆåŠŸ
![success](./assets/success.png)

3. æ£€ç´¢å¤±è´¥
![fail](./assets/fail.png)

Made with â¤ï¸ using CAMEL + Qwen + Qdrant + Gradio

test
